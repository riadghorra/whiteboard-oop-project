import socket
from threading import Thread
from datetime import datetime
import json

clients = []
historique = {"message": "", 'actions': [
    {'type': 'Point', 'timestamp': 1571143396.301723, 'params': [(178, 145), 1, [0, 0, 255], 12], 'client': 'client'},
    {'type': 'Point', 'timestamp': 1571143399.694107, 'params': [(359, 149), 1, [0, 255, 0], 10], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.573554, 'params': [[255, 0, 0], (171, 291), (171, 292), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.579537, 'params': [[255, 0, 0], (171, 292), (171, 293), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.587517, 'params': [[255, 0, 0], (171, 293), (173, 295), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.595496, 'params': [[255, 0, 0], (173, 295), (174, 296), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.603474, 'params': [[255, 0, 0], (174, 296), (175, 298), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.611454, 'params': [[255, 0, 0], (175, 298), (176, 300), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.619432, 'params': [[255, 0, 0], (176, 300), (179, 304), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.62741, 'params': [[255, 0, 0], (179, 304), (182, 310), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.63539, 'params': [[255, 0, 0], (182, 310), (185, 314), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.641373, 'params': [[255, 0, 0], (185, 314), (189, 319), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.649352, 'params': [[255, 0, 0], (189, 319), (192, 325), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.657329, 'params': [[255, 0, 0], (192, 325), (195, 329), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.66531, 'params': [[255, 0, 0], (195, 329), (200, 334), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.673287, 'params': [[255, 0, 0], (200, 334), (205, 340), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.681266, 'params': [[255, 0, 0], (205, 340), (211, 345), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.689245, 'params': [[255, 0, 0], (211, 345), (218, 350), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.697223, 'params': [[255, 0, 0], (218, 350), (224, 354), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.705203, 'params': [[255, 0, 0], (224, 354), (229, 357), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.711186, 'params': [[255, 0, 0], (229, 357), (235, 359), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.719166, 'params': [[255, 0, 0], (235, 359), (241, 361), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.727142, 'params': [[255, 0, 0], (241, 361), (247, 363), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.735122, 'params': [[255, 0, 0], (247, 363), (252, 365), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.743102, 'params': [[255, 0, 0], (252, 365), (260, 367), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.751082, 'params': [[255, 0, 0], (260, 367), (265, 370), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.759057, 'params': [[255, 0, 0], (265, 370), (273, 374), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.767038, 'params': [[255, 0, 0], (273, 374), (279, 377), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.775016, 'params': [[255, 0, 0], (279, 377), (286, 379), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.780999, 'params': [[255, 0, 0], (286, 379), (291, 381), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.788977, 'params': [[255, 0, 0], (291, 381), (297, 383), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.796958, 'params': [[255, 0, 0], (297, 383), (303, 384), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.804935, 'params': [[255, 0, 0], (303, 384), (309, 386), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.812913, 'params': [[255, 0, 0], (309, 386), (314, 387), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.820892, 'params': [[255, 0, 0], (314, 387), (320, 388), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.828872, 'params': [[255, 0, 0], (320, 388), (324, 388), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.83685, 'params': [[255, 0, 0], (324, 388), (330, 389), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.842833, 'params': [[255, 0, 0], (330, 389), (335, 390), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.850815, 'params': [[255, 0, 0], (335, 390), (341, 390), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.858791, 'params': [[255, 0, 0], (341, 390), (345, 390), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.867768, 'params': [[255, 0, 0], (345, 390), (349, 389), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.875754, 'params': [[255, 0, 0], (349, 389), (355, 387), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.883725, 'params': [[255, 0, 0], (355, 387), (359, 386), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.890706, 'params': [[255, 0, 0], (359, 386), (364, 385), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.899682, 'params': [[255, 0, 0], (364, 385), (368, 383), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.90766, 'params': [[255, 0, 0], (368, 383), (370, 381), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.913645, 'params': [[255, 0, 0], (370, 381), (372, 380), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.921623, 'params': [[255, 0, 0], (372, 380), (373, 379), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.929602, 'params': [[255, 0, 0], (373, 379), (375, 377), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.93758, 'params': [[255, 0, 0], (375, 377), (376, 376), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.945561, 'params': [[255, 0, 0], (376, 376), (378, 374), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.953538, 'params': [[255, 0, 0], (378, 374), (379, 373), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.961516, 'params': [[255, 0, 0], (379, 373), (380, 371), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.969497, 'params': [[255, 0, 0], (380, 371), (381, 370), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.97548, 'params': [[255, 0, 0], (381, 370), (383, 369), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.983459, 'params': [[255, 0, 0], (383, 369), (384, 367), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.991437, 'params': [[255, 0, 0], (384, 367), (385, 366), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143402.999416, 'params': [[255, 0, 0], (385, 366), (387, 364), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.007394, 'params': [[255, 0, 0], (387, 364), (388, 362), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.015372, 'params': [[255, 0, 0], (388, 362), (389, 361), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.023351, 'params': [[255, 0, 0], (389, 361), (390, 359), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.03133, 'params': [[255, 0, 0], (390, 359), (391, 355), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.039309, 'params': [[255, 0, 0], (391, 355), (393, 353), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.045292, 'params': [[255, 0, 0], (393, 353), (394, 351), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.053271, 'params': [[255, 0, 0], (394, 351), (396, 349), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.06125, 'params': [[255, 0, 0], (396, 349), (397, 346), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.069229, 'params': [[255, 0, 0], (397, 346), (399, 345), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.077207, 'params': [[255, 0, 0], (399, 345), (400, 344), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.085186, 'params': [[255, 0, 0], (400, 344), (402, 342), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.093164, 'params': [[255, 0, 0], (402, 342), (403, 341), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.101145, 'params': [[255, 0, 0], (403, 341), (404, 339), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.109122, 'params': [[255, 0, 0], (404, 339), (404, 338), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.115106, 'params': [[255, 0, 0], (404, 338), (404, 337), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.123085, 'params': [[255, 0, 0], (404, 337), (405, 335), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.131063, 'params': [[255, 0, 0], (405, 335), (405, 334), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.139041, 'params': [[255, 0, 0], (405, 334), (406, 333), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.14702, 'params': [[255, 0, 0], (406, 333), (406, 331), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.155, 'params': [[255, 0, 0], (406, 331), (406, 329), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.162979, 'params': [[255, 0, 0], (406, 329), (406, 327), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.170958, 'params': [[255, 0, 0], (406, 327), (407, 325), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.178934, 'params': [[255, 0, 0], (407, 325), (408, 323), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.184919, 'params': [[255, 0, 0], (408, 323), (409, 320), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.192897, 'params': [[255, 0, 0], (409, 320), (409, 318), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.200878, 'params': [[255, 0, 0], (409, 318), (410, 317), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.208857, 'params': [[255, 0, 0], (410, 317), (411, 316), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.217831, 'params': [[255, 0, 0], (411, 316), (412, 313), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.224812, 'params': [[255, 0, 0], (412, 313), (412, 312), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.233791, 'params': [[255, 0, 0], (412, 312), (414, 311), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.241767, 'params': [[255, 0, 0], (414, 311), (414, 309), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.254733, 'params': [[255, 0, 0], (414, 309), (415, 308), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.262711, 'params': [[255, 0, 0], (415, 308), (415, 307), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.271687, 'params': [[255, 0, 0], (415, 307), (415, 306), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.279666, 'params': [[255, 0, 0], (415, 306), (415, 305), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.287645, 'params': [[255, 0, 0], (415, 305), (415, 304), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143403.303602, 'params': [[255, 0, 0], (415, 304), (415, 303), 10],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.443355, 'params': [[0, 0, 0], (182, 67), (180, 67), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.451333, 'params': [[0, 0, 0], (180, 67), (178, 68), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.459312, 'params': [[0, 0, 0], (178, 68), (175, 70), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.46729, 'params': [[0, 0, 0], (175, 70), (169, 71), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.47527, 'params': [[0, 0, 0], (169, 71), (162, 73), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.481255, 'params': [[0, 0, 0], (162, 73), (155, 75), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.489232, 'params': [[0, 0, 0], (155, 75), (147, 77), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.49721, 'params': [[0, 0, 0], (147, 77), (136, 80), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.505189, 'params': [[0, 0, 0], (136, 80), (122, 86), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.513167, 'params': [[0, 0, 0], (122, 86), (107, 92), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.521146, 'params': [[0, 0, 0], (107, 92), (95, 97), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.529125, 'params': [[0, 0, 0], (95, 97), (84, 102), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.537103, 'params': [[0, 0, 0], (84, 102), (75, 108), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.543089, 'params': [[0, 0, 0], (75, 108), (68, 112), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.551067, 'params': [[0, 0, 0], (68, 112), (62, 117), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.559044, 'params': [[0, 0, 0], (62, 117), (56, 123), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.567023, 'params': [[0, 0, 0], (56, 123), (49, 129), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.575003, 'params': [[0, 0, 0], (49, 129), (44, 135), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.582981, 'params': [[0, 0, 0], (44, 135), (39, 144), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.590959, 'params': [[0, 0, 0], (39, 144), (35, 152), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.59894, 'params': [[0, 0, 0], (35, 152), (32, 161), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.606922, 'params': [[0, 0, 0], (32, 161), (30, 168), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.612906, 'params': [[0, 0, 0], (30, 168), (27, 176), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.620885, 'params': [[0, 0, 0], (27, 176), (26, 184), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.628864, 'params': [[0, 0, 0], (26, 184), (25, 191), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.636842, 'params': [[0, 0, 0], (25, 191), (25, 197), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.644821, 'params': [[0, 0, 0], (25, 197), (25, 202), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.652799, 'params': [[0, 0, 0], (25, 202), (26, 208), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.660777, 'params': [[0, 0, 0], (26, 208), (28, 213), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.669755, 'params': [[0, 0, 0], (28, 213), (30, 219), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.676735, 'params': [[0, 0, 0], (30, 219), (32, 226), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.68372, 'params': [[0, 0, 0], (32, 226), (34, 235), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.690697, 'params': [[0, 0, 0], (34, 235), (39, 243), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.698678, 'params': [[0, 0, 0], (39, 243), (42, 251), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.707163, 'params': [[0, 0, 0], (42, 251), (45, 260), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.715142, 'params': [[0, 0, 0], (45, 260), (49, 268), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.723119, 'params': [[0, 0, 0], (49, 268), (55, 278), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.7311, 'params': [[0, 0, 0], (55, 278), (60, 287), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.739077, 'params': [[0, 0, 0], (60, 287), (65, 297), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.74506, 'params': [[0, 0, 0], (65, 297), (72, 305), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.753041, 'params': [[0, 0, 0], (72, 305), (78, 313), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.761018, 'params': [[0, 0, 0], (78, 313), (85, 321), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.768997, 'params': [[0, 0, 0], (85, 321), (94, 330), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.776975, 'params': [[0, 0, 0], (94, 330), (102, 338), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.784955, 'params': [[0, 0, 0], (102, 338), (110, 344), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.792934, 'params': [[0, 0, 0], (110, 344), (120, 351), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.800913, 'params': [[0, 0, 0], (120, 351), (130, 356), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.809364, 'params': [[0, 0, 0], (130, 356), (139, 362), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.815349, 'params': [[0, 0, 0], (139, 362), (149, 367), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.823328, 'params': [[0, 0, 0], (149, 367), (158, 373), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.831308, 'params': [[0, 0, 0], (158, 373), (166, 378), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.839284, 'params': [[0, 0, 0], (166, 378), (175, 384), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.847264, 'params': [[0, 0, 0], (175, 384), (184, 391), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.855242, 'params': [[0, 0, 0], (184, 391), (191, 396), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.863221, 'params': [[0, 0, 0], (191, 396), (200, 402), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.8712, 'params': [[0, 0, 0], (200, 402), (206, 406), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.877182, 'params': [[0, 0, 0], (206, 406), (210, 408), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.885162, 'params': [[0, 0, 0], (210, 408), (216, 412), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.89314, 'params': [[0, 0, 0], (216, 412), (223, 418), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.901119, 'params': [[0, 0, 0], (223, 418), (228, 420), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.909097, 'params': [[0, 0, 0], (228, 420), (233, 425), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.917077, 'params': [[0, 0, 0], (233, 425), (239, 428), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.925055, 'params': [[0, 0, 0], (239, 428), (244, 431), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.933035, 'params': [[0, 0, 0], (244, 431), (250, 434), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.941012, 'params': [[0, 0, 0], (250, 434), (256, 437), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.948993, 'params': [[0, 0, 0], (256, 437), (262, 441), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.954975, 'params': [[0, 0, 0], (262, 441), (268, 445), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.962954, 'params': [[0, 0, 0], (268, 445), (274, 448), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.970932, 'params': [[0, 0, 0], (274, 448), (280, 451), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.97891, 'params': [[0, 0, 0], (280, 451), (284, 453), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.98689, 'params': [[0, 0, 0], (284, 453), (288, 455), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143405.99487, 'params': [[0, 0, 0], (288, 455), (293, 457), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.002848, 'params': [[0, 0, 0], (293, 457), (298, 459), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.010825, 'params': [[0, 0, 0], (298, 459), (301, 461), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.016809, 'params': [[0, 0, 0], (301, 461), (306, 463), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.024788, 'params': [[0, 0, 0], (306, 463), (310, 465), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.032766, 'params': [[0, 0, 0], (310, 465), (316, 467), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.041743, 'params': [[0, 0, 0], (316, 467), (321, 469), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.048725, 'params': [[0, 0, 0], (321, 469), (326, 470), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.056703, 'params': [[0, 0, 0], (326, 470), (331, 472), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.06568, 'params': [[0, 0, 0], (331, 472), (336, 473), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.073658, 'params': [[0, 0, 0], (336, 473), (343, 474), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.079642, 'params': [[0, 0, 0], (343, 474), (349, 474), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.087621, 'params': [[0, 0, 0], (349, 474), (355, 474), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.0956, 'params': [[0, 0, 0], (355, 474), (362, 473), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.103578, 'params': [[0, 0, 0], (362, 473), (369, 471), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.111556, 'params': [[0, 0, 0], (369, 471), (375, 469), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.119535, 'params': [[0, 0, 0], (375, 469), (381, 467), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.127514, 'params': [[0, 0, 0], (381, 467), (387, 464), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.135493, 'params': [[0, 0, 0], (387, 464), (392, 460), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.14347, 'params': [[0, 0, 0], (392, 460), (396, 456), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.15145, 'params': [[0, 0, 0], (396, 456), (400, 453), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.157433, 'params': [[0, 0, 0], (400, 453), (405, 448), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.165413, 'params': [[0, 0, 0], (405, 448), (408, 443), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.173392, 'params': [[0, 0, 0], (408, 443), (412, 437), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.181369, 'params': [[0, 0, 0], (412, 437), (418, 432), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.189348, 'params': [[0, 0, 0], (418, 432), (422, 426), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.197328, 'params': [[0, 0, 0], (422, 426), (427, 419), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.205306, 'params': [[0, 0, 0], (427, 419), (431, 413), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.213287, 'params': [[0, 0, 0], (431, 413), (435, 407), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.219268, 'params': [[0, 0, 0], (435, 407), (439, 401), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.227247, 'params': [[0, 0, 0], (439, 401), (442, 393), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.235226, 'params': [[0, 0, 0], (442, 393), (444, 388), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.243204, 'params': [[0, 0, 0], (444, 388), (446, 381), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.251183, 'params': [[0, 0, 0], (446, 381), (448, 374), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.259161, 'params': [[0, 0, 0], (448, 374), (449, 365), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.26714, 'params': [[0, 0, 0], (449, 365), (451, 357), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.275119, 'params': [[0, 0, 0], (451, 357), (453, 349), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.283097, 'params': [[0, 0, 0], (453, 349), (455, 341), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.289082, 'params': [[0, 0, 0], (455, 341), (457, 332), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.297061, 'params': [[0, 0, 0], (457, 332), (459, 327), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.305039, 'params': [[0, 0, 0], (459, 327), (460, 320), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.313018, 'params': [[0, 0, 0], (460, 320), (460, 312), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.320996, 'params': [[0, 0, 0], (460, 312), (459, 303), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.328975, 'params': [[0, 0, 0], (459, 303), (457, 295), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.336954, 'params': [[0, 0, 0], (457, 295), (455, 288), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.344934, 'params': [[0, 0, 0], (455, 288), (455, 281), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.352911, 'params': [[0, 0, 0], (455, 281), (455, 273), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.358895, 'params': [[0, 0, 0], (455, 273), (455, 267), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.366873, 'params': [[0, 0, 0], (455, 267), (456, 260), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.374853, 'params': [[0, 0, 0], (456, 260), (457, 253), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.38283, 'params': [[0, 0, 0], (457, 253), (459, 247), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.390809, 'params': [[0, 0, 0], (459, 247), (461, 240), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.398788, 'params': [[0, 0, 0], (461, 240), (462, 235), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.406767, 'params': [[0, 0, 0], (462, 235), (463, 229), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.414747, 'params': [[0, 0, 0], (463, 229), (464, 225), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.420729, 'params': [[0, 0, 0], (464, 225), (464, 220), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.428707, 'params': [[0, 0, 0], (464, 220), (463, 215), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.437696, 'params': [[0, 0, 0], (463, 215), (462, 209), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.444666, 'params': [[0, 0, 0], (462, 209), (461, 205), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.453641, 'params': [[0, 0, 0], (461, 205), (460, 199), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.461626, 'params': [[0, 0, 0], (460, 199), (459, 196), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.4696, 'params': [[0, 0, 0], (459, 196), (458, 192), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.477578, 'params': [[0, 0, 0], (458, 192), (456, 186), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.485556, 'params': [[0, 0, 0], (456, 186), (454, 180), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.49154, 'params': [[0, 0, 0], (454, 180), (452, 174), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.49952, 'params': [[0, 0, 0], (452, 174), (449, 168), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.507498, 'params': [[0, 0, 0], (449, 168), (446, 163), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.515476, 'params': [[0, 0, 0], (446, 163), (442, 157), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.523454, 'params': [[0, 0, 0], (442, 157), (438, 151), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.531447, 'params': [[0, 0, 0], (438, 151), (435, 145), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.539412, 'params': [[0, 0, 0], (435, 145), (433, 139), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.547391, 'params': [[0, 0, 0], (433, 139), (430, 133), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.553374, 'params': [[0, 0, 0], (430, 133), (427, 127), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.561354, 'params': [[0, 0, 0], (427, 127), (424, 122), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.569332, 'params': [[0, 0, 0], (424, 122), (420, 118), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.57731, 'params': [[0, 0, 0], (420, 118), (416, 113), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.58529, 'params': [[0, 0, 0], (416, 113), (411, 109), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.593269, 'params': [[0, 0, 0], (411, 109), (407, 105), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.601246, 'params': [[0, 0, 0], (407, 105), (402, 102), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.609225, 'params': [[0, 0, 0], (402, 102), (400, 100), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.61521, 'params': [[0, 0, 0], (400, 100), (396, 98), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.623188, 'params': [[0, 0, 0], (396, 98), (391, 96), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.631166, 'params': [[0, 0, 0], (391, 96), (387, 95), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.639146, 'params': [[0, 0, 0], (387, 95), (383, 93), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.647125, 'params': [[0, 0, 0], (383, 93), (378, 91), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.655102, 'params': [[0, 0, 0], (378, 91), (372, 89), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.663083, 'params': [[0, 0, 0], (372, 89), (366, 87), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.671059, 'params': [[0, 0, 0], (366, 87), (360, 85), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.679038, 'params': [[0, 0, 0], (360, 85), (354, 83), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.687017, 'params': [[0, 0, 0], (354, 83), (349, 81), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.693002, 'params': [[0, 0, 0], (349, 81), (343, 80), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.70098, 'params': [[0, 0, 0], (343, 80), (337, 78), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.708958, 'params': [[0, 0, 0], (337, 78), (331, 76), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.716937, 'params': [[0, 0, 0], (331, 76), (326, 74), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.724915, 'params': [[0, 0, 0], (326, 74), (320, 72), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.732894, 'params': [[0, 0, 0], (320, 72), (316, 71), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.740873, 'params': [[0, 0, 0], (316, 71), (311, 69), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.748852, 'params': [[0, 0, 0], (311, 69), (307, 68), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.754835, 'params': [[0, 0, 0], (307, 68), (302, 67), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.762818, 'params': [[0, 0, 0], (302, 67), (298, 66), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.770793, 'params': [[0, 0, 0], (298, 66), (292, 65), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.779771, 'params': [[0, 0, 0], (292, 65), (287, 64), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.78675, 'params': [[0, 0, 0], (287, 64), (281, 63), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.795727, 'params': [[0, 0, 0], (281, 63), (275, 62), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.803706, 'params': [[0, 0, 0], (275, 62), (271, 61), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.811685, 'params': [[0, 0, 0], (271, 61), (267, 60), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.817668, 'params': [[0, 0, 0], (267, 60), (263, 60), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.825647, 'params': [[0, 0, 0], (263, 60), (259, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.833625, 'params': [[0, 0, 0], (259, 59), (257, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.841604, 'params': [[0, 0, 0], (257, 59), (253, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.849584, 'params': [[0, 0, 0], (253, 59), (248, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.857561, 'params': [[0, 0, 0], (248, 59), (243, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.86554, 'params': [[0, 0, 0], (243, 59), (238, 59), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.873518, 'params': [[0, 0, 0], (238, 59), (234, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.881505, 'params': [[0, 0, 0], (234, 59), (231, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.887481, 'params': [[0, 0, 0], (231, 59), (227, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.895476, 'params': [[0, 0, 0], (227, 59), (226, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.903438, 'params': [[0, 0, 0], (226, 59), (224, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.911417, 'params': [[0, 0, 0], (224, 59), (222, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.919396, 'params': [[0, 0, 0], (222, 59), (221, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.927374, 'params': [[0, 0, 0], (221, 59), (219, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.935354, 'params': [[0, 0, 0], (219, 59), (216, 59), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.943332, 'params': [[0, 0, 0], (216, 59), (214, 60), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.951311, 'params': [[0, 0, 0], (214, 60), (212, 61), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.957294, 'params': [[0, 0, 0], (212, 61), (211, 61), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.965273, 'params': [[0, 0, 0], (211, 61), (210, 61), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.973253, 'params': [[0, 0, 0], (210, 61), (208, 61), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.989209, 'params': [[0, 0, 0], (208, 61), (207, 62), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143406.997188, 'params': [[0, 0, 0], (207, 62), (205, 63), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.005166, 'params': [[0, 0, 0], (205, 63), (204, 63), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.013145, 'params': [[0, 0, 0], (204, 63), (202, 64), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.027108, 'params': [[0, 0, 0], (202, 64), (201, 65), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.035087, 'params': [[0, 0, 0], (201, 65), (199, 66), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.043066, 'params': [[0, 0, 0], (199, 66), (198, 68), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.051044, 'params': [[0, 0, 0], (198, 68), (196, 69), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.059022, 'params': [[0, 0, 0], (196, 69), (195, 70), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.067001, 'params': [[0, 0, 0], (195, 70), (194, 71), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.074981, 'params': [[0, 0, 0], (194, 71), (192, 72), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.082958, 'params': [[0, 0, 0], (192, 72), (191, 73), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.088942, 'params': [[0, 0, 0], (191, 73), (189, 74), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.096922, 'params': [[0, 0, 0], (189, 74), (188, 75), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.104899, 'params': [[0, 0, 0], (188, 75), (187, 75), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.113203, 'params': [[0, 0, 0], (187, 75), (185, 76), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.121179, 'params': [[0, 0, 0], (185, 76), (184, 77), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.129158, 'params': [[0, 0, 0], (184, 77), (183, 77), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.137137, 'params': [[0, 0, 0], (183, 77), (181, 78), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.145116, 'params': [[0, 0, 0], (181, 78), (180, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.153095, 'params': [[0, 0, 0], (180, 79), (179, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.167057, 'params': [[0, 0, 0], (179, 79), (178, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.187003, 'params': [[0, 0, 0], (178, 79), (177, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.198971, 'params': [[0, 0, 0], (177, 79), (176, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.233141, 'params': [[0, 0, 0], (176, 79), (175, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.249098, 'params': [[0, 0, 0], (175, 79), (174, 79), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.261067, 'params': [[0, 0, 0], (174, 79), (174, 78), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.298965, 'params': [[0, 0, 0], (174, 78), (173, 78), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.31533, 'params': [[0, 0, 0], (173, 78), (172, 77), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.327298, 'params': [[0, 0, 0], (172, 77), (172, 76), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.361208, 'params': [[0, 0, 0], (172, 76), (172, 75), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.369186, 'params': [[0, 0, 0], (172, 75), (172, 74), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.385143, 'params': [[0, 0, 0], (172, 74), (172, 73), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.393122, 'params': [[0, 0, 0], (172, 73), (172, 72), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.4011, 'params': [[0, 0, 0], (172, 72), (172, 71), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.40908, 'params': [[0, 0, 0], (172, 71), (173, 71), 5], 'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.417571, 'params': [[0, 0, 0], (173, 71), (173, 70), 5],
     'client': 'client'},
    {'type': 'Line', 'timestamp': 1571143407.427544, 'params': [[0, 0, 0], (173, 70), (173, 69), 5],
     'client': 'client'}, {'type': 'Text_box', 'timestamp': 1571143408.89564, 'id': 0,
                           'params': [173, 522, 140, 32, [30, 30, 30], 'timesnewroman', 20, 'Monsieur Patate',
                                      [0, 0, 0]], 'client': 'client'}]}


def dict_to_binary(the_dict):
    str = json.dumps(the_dict)
    return bytes(str, 'utf-8')


def binary_to_dict(the_binary):
    jsn = ''.join(the_binary.decode("utf-8"))
    d = json.loads(jsn)
    return d


class Client(Thread):
    def __init__(self):
        Thread.__init__(self)
        self.nom = None
        self.done = False

    def run(self):
        while not self.done:
            msg_recu = self.nom.recv(2 ** 20)
            msg_recu = msg_recu.decode()
            now = datetime.now()
            timestamp = datetime.timestamp(now)
            historique.update({timestamp: (msg_recu)})
            if msg_recu == "END":
                done = True
                historique["message"] = "end"
            if msg_recu == "START":
                historique["message"] = "Demarrage du whiteboard"
            else:
                historique["message"] = msg_recu + " recu 5/5"
            self.nom.send(dict_to_binary(historique))

    def setclient(self, c):
        self.nom = c


def main():
    hote = ''
    port = 5001
    connexion = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    connexion.bind((hote, port))
    connexion.listen(100)
    print("Le serveur est prêt sur le port numéro {}".format(port))
    while True:
        client, infos_connexion = connexion.accept()
        client.send(dict_to_binary(historique))
        new_thread = Client()
        new_thread.setclient(client)
        clients.append(new_thread)
        new_thread.start()


if __name__ == '__main__':
    main()
